<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />

    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <link href="assets/css/style.css" rel="stylesheet" />
    <title>Payment Form</title>
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="logo">
          <a href="index.html"
            ><img
              src="https://i.postimg.cc/tCqmMDPc/binx.png"
              alt=""
              class="img-fluid"
          /></a>
        </div>

        <nav id="navbar" class="navbar">
          <ul>
            <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
            <li>
              <a class="nav-link scrollto" href="#about">About Binx AI</a>
            </li>

            <li><a class="nav-link scrollto" href="#features">Features</a></li>
            <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
          </ul>
          <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
        <!-- .navbar -->
      </div>
    </header>
    <!-- End Header -->

    <div class="container">
      <!-- Payment Form -->
      <div class="row py-5 align-items-center justify-content-center p-form">
        <div class="col-md-5 pr-lg-5 mb-5 mb-md-0">
          <img
            src="assets/img/pay.png"
            alt=""
            class="img-fluid mb-3 d-none d-md-block"
          />
          <h1>Payment Form</h1>
          <p class="font-italic text-muted mb-0">
             Welcome to our payment form page! Your payment is powerfully secured by Paystack.
          </p>
         
          </p>
        </div>

        <div class="col-md-6 col-lg-5 mx-auto">
          <div class="alert alert-success" id="plan_show"></div>
          <form id="paymentForm" action="#">
            <div class="row">
              <!-- First Name -->
              <div class="input-group col-lg-6 mb-4">
                <div class="input-group-prepend">
                  <span
                    class="input-group-text bg-white px-4 border-md border-right-0"
                  >
                    <i class="fa fa-user text-muted"></i>
                  </span>
                </div>
                <input
                  id="firstName"
                  type="text"
                  name="firstname"
                  placeholder="First Name"
                  class="form-control bg-white border-left-0 border-md"
                  required
                />
              </div>

              <!-- Last Name -->
              <div class="input-group col-lg-6 mb-4">
                <div class="input-group-prepend">
                  <span
                    class="input-group-text bg-white px-4 border-md border-right-0"
                  >
                    <i class="fa fa-user text-muted"></i>
                  </span>
                </div>
                <input
                  id="lastName"
                  type="text"
                  name="lastname"
                  placeholder="Last Name"
                  class="form-control bg-white border-left-0 border-md"
                  required
                />
              </div>

              <!-- Email Address -->
              <div class="input-group col-lg-12 mb-4">
                <div class="input-group-prepend">
                  <span
                    class="input-group-text bg-white px-4 border-md border-right-0"
                  >
                    <i class="fa fa-envelope text-muted"></i>
                  </span>
                </div>
                <input
                  id="email"
                  type="email"
                  name="email"
                  placeholder="Email Address"
                  class="form-control bg-white border-left-0 border-md"
                  required
                />
              </div>

              <!-- Phone Number -->
              <div class="input-group col-lg-12 mb-4">
                <div class="input-group-prepend">
                  <span
                    class="input-group-text bg-white px-4 border-md border-right-0"
                  >
                    <i class="fa fa-whatsapp text-muted"></i>
                  </span>
                </div>
                <select
                  id="countryCode"
                  name="countryCode"
                  style="max-width: 80px"
                  class="custom-select form-control bg-white border-left-0 border-md h-100 font-weight-bold text-muted"
                >
                  <option value="">+1</option>
                  <option value="">+7</option>
                  <option value="">+20</option>
                  <option value="">+27</option>
                  <option value="">+30</option>
                  <option value="">+31</option>
                  <option value="">+32</option>
                  <option value="">+33</option>
                  <option value="">+34</option>
                  <option value="">+36</option>
                  <option value="">+39</option>
                  <option value="">+40</option>
                  <option value="">+41</option>
                  <option value="">+43</option>
                  <option value="">+44</option>
                  <option value="">+45</option>
                  <option value="">+46</option>
                  <option value="">+47</option>
                  <option value="">+48</option>
                  <option value="">+49</option>
                  <option value="">+51</option>
                  <option value="">+52</option>
                  <option value="">+53</option>
                  <option value="">+54</option>
                  <option value="">+55</option>
                  <option value="">+56</option>
                  <option value="">+57</option>
                  <option value="">+58</option>
                  <option value="">+60</option>
                  <option value="">+61</option>
                  <option value="">+62</option>
                  <option value="">+63</option>
                  <option value="">+64</option>
                  <option value="">+65</option>
                  <option value="">+66</option>
                  <option value="">+81</option>
                  <option value="">+82</option>
                  <option value="">+84</option>
                  <option value="">+86</option>
                  <option value="">+90</option>
                  <option value="">+91</option>
                  <option value="">+92</option>
                  <option value="">+93</option>
                  <option value="">+94</option>
                  <option value="">+95</option>
                  <option value="">+98</option>
                  <option value="">+211</option>
                  <option value="">+212</option>
                  <option value="">+213</option>
                  <option value="">+216</option>
                  <option value="">+218</option>
                  <option value="">+220</option>
                  <option value="">+221</option>
                  <option value="">+222</option>
                  <option value="">+223</option>
                  <option value="">+224</option>
                  <option value="">+225</option>
                  <option value="">+226</option>
                  <option value="">+227</option>
                  <option value="">+228</option>
                  <option value="">+229</option>
                  <option value="">+230</option>
                  <option value="">+231</option>
                  <option value="">+232</option>
                  <option value="">+233</option>
                  <option value="">+234</option>
                  <option value="">+235</option>
                  <option value="">+236</option>
                  <option value="">+237</option>
                  <option value="">+238</option>
                  <option value="">+239</option>
                  <option value="">+240</option>
                  <option value="">+241</option>
                  <option value="">+242</option>
                  <option value="">+243</option>
                  <option value="">+244</option>
                  <option value="">+245</option>
                  <option value="">+246</option>
                  <option value="">+247</option>
                  <option value="">+248</option>
                  <option value="">+249</option>
                  <option value="">+250</option>
                  <option value="">+251</option>
                  <option value="">+252</option>
                  <option value="">+253</option>
                  <option value="">+254</option>
                  <option value="">+255</option>
                  <option value="">+256</option>
                  <option value="">+257</option>
                  <option value="">+258</option>
                  <option value="">+260</option>
                  <option value="">+261</option>
                  <option value="">+262</option>
                  <option value="">+263</option>
                  <option value="">+264</option>
                  <option value="">+265</option>
                  <option value="">+266</option>
                  <option value="">+267</option>
                  <option value="">+268</option>
                  <option value="">+269</option>
                  <option value="">+290</option>
                  <option value="">+291</option>
                  <option value="">+297</option>
                  <option value="">+298</option>
                  <option value="">+299</option>
                  <option value="">+350</option>
                  <option value="">+351</option>
                  <option value="">+352</option>
                  <option value="">+353</option>
                  <option value="">+354</option>
                  <option value="">+355</option>
                  <option value="">+356</option>
                  <option value="">+357</option>
                  <option value="">+358</option>
                  <option value="">+359</option>
                  <option value="">+370</option>
                  <option value="">+371</option>
                  <option value="">+372</option>
                  <option value="">+373</option>
                  <option value="">+374</option>
                  <option value="">+375</option>
                  <option value="">+376</option>
                  <option value="">+377</option>
                  <option value="">+378</option>
                  <option value="">+379</option>
                  <option value="">+380</option>
                  <option value="">+381</option>
                  <option value="">+382</option>
                  <option value="">+383</option>
                  <option value="">+385</option>
                  <option value="">+386</option>
                  <option value="">+387</option>
                  <option value="">+389</option>
                  <option value="">+420</option>
                  <option value="">+421</option>
                  <option value="">+423</option>
                  <option value="">+500</option>
                  <option value="">+501</option>
                  <option value="">+502</option>
                  <option value="">+503</option>
                  <option value="">+504</option>
                  <option value="">+505</option>
                  <option value="">+506</option>
                  <option value="">+507</option>
                  <option value="">+508</option>
                  <option value="">+509</option>
                  <option value="">+590</option>
                  <option value="">+591</option>
                  <option value="">+592</option>
                  <option value="">+593</option>
                  <option value="">+594</option>
                  <option value="">+595</option>
                  <option value="">+596</option>
                  <option value="">+597</option>
                  <option value="">+598</option>
                  <option value="">+599</option>
                  <option value="">+670</option>
                  <option value="">+672</option>
                  <option value="">+673</option>
                  <option value="">+674</option>
                  <option value="">+675</option>
                  <option value="">+676</option>
                  <option value="">+677</option>
                  <option value="">+678</option>
                  <option value="">+679</option>
                  <option value="">+680</option>
                  <option value="">+12</option>
                  <option value="">+10</option>
                  <option value="">+15</option>
                  <option value="">+18</option>
                </select>
                <input
                  id="phoneNumber"
                  type="tel"
                  name="phone"
                  placeholder="Phone Number"
                  class="form-control bg-white border-md border-left-0 pl-3"
                  required
                />
              </div>
               <!-- OTP -->
              <div class="input-group col-lg-12 mb-4 d-none" id="otp-div">
                <div class="input-group-prepend">
                  <span
                    class="input-group-text bg-white px-4 border-md border-right-0"
                  >
                    <i class="fa fa-lock text-muted"></i>
                  </span>
                </div>
                <input
                  id="otp"
                  type="number"
                  name="otp"
                  maxlength="6"
                  placeholder="Enter OTP "
                  class="form-control bg-white border-left-0 border-md "
                />
              </div>
            </div>
            <button id="continueBtn" class="btn btn-primary w-100 p-2">
              continue
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- Paystack Inline Checkout Script -->
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <script>
      amount = 0;
      // Get the URL parameters
      const urlParams = new URLSearchParams(window.location.search);

      // Get the value of the 'plan' parameter
      const plan = urlParams.get("plan") || "premium";

      // Log the value of the 'plan' parameter
      console.log(plan);
      pls = document.getElementById("plan_show");

      switch (plan) {
        case "premium":
          amount = 300000;
          pls.innerHTML = "You have choosen a premium plan";
          break;
        case "super_premium":
          amount = 3000000;
          pls.innerHTML = "You have choosen a super premium plan";
          break;
        default:
          amount = 300000;
          pls.innerHTML = "You have choosen a premium plan";
          break;
      }

      // Function to handle Paystack checkout
      function payWithPaystack(email, phone, amount, name, plan) {
        var handler = PaystackPop.setup({
          key: "pk_test_c720d983a1e01efbbe84667533e75c04271c0a22", // Replace with your public key
          email: email,
          amount: amount, // Amount in kobo
          currency: "NGN", // Currency code
          ref: "" + Math.floor(Math.random() * 1000000000 + 1), // Generate a random reference number
          callback: function (response) {
            const currentDate = new Date();

            // Add 30 days to the current date
            const futureDate = new Date(
              currentDate.getTime() + 30 * 24 * 60 * 60 * 1000
            );

            // Format the future date as "10 Jan, 2024"
            const options = { day: "numeric", month: "short", year: "numeric" };
            const formattedDate = futureDate.toLocaleDateString(
              "en-US",
              options
            );

            console.log(response);
            console.log({
              Fullname: name,
              email: email,
              plan: plan,
              price: amount / 100,
              "Expiry Date": formattedDate,
              "Phone number": phone,
            });
            // What to do after payment is successful
            alert("Payment complete! Reference: " + response.reference);
          },
          onClose: function () {
            alert("Transaction was not completed, window closed.");
          },
        });
        handler.openIframe();
      }

      // Function to validate phone number
      function validatePhoneNumber(phone) {
        // Add your phone number validation logic here
        return true; // Return true if phone number is valid, false otherwise
      }

      // Handle continue button click
      document
        .getElementById("continueBtn")
        .addEventListener("click", function () {
          var fname = document.getElementById("firstName").value;
          var lname = document.getElementById("lastName").value;
          var name = fname + " " + lname;
          var email = document.getElementById("email").value;
          var phone = document.getElementById("phoneNumber").value;
          var countryCode = document.getElementById("countryCode").value;
          var otp = document.getElementById("otp-div")
          var otp = document.getElementById("otp").value
          otp.classList.remove("d-none")

          // Validate phone number
          if (validatePhoneNumber(phone)) {
            // Concatenate country code and phone number
            var phoneNumber = countryCode + phone;

            // Call Paystack checkout function
            payWithPaystack(email, phoneNumber, amount, name, plan);
          } else {
            alert("Invalid phone number");
          }
        });
    </script>
  </body>
</html>
